/*
        Supersized - Fullscreen Background jQuery Plugin
        Flickr Edition Version 1.0
        www.buildinternet.com/project/supersized

        By Sam Dunn / One Mighty Roar (www.onemightyroar.com)
        Released under MIT License
*/

(function(a){a(document).ready(function(){a("body").prepend('<div id="supersized-loader"></div>').prepend('<div id="supersized"></div>')});a.supersized=function(o){var c={slideshow:1,autoplay:1,start_slide:1,slide_interval:5000,transition:1,transition_speed:750,new_window:1,pause_hover:0,keyboard_nav:1,performance:1,min_width:0,min_height:0,vertical_center:1,horizontal_center:1,fit_portrait:0,fit_landscape:0,navigation:1,thumbnail_navigation:0,slide_counter:1,slide_captions:1,source:2,set:false,user:false,group:false,total_slides:100,image_size:"z",slides:[{}],api_key:"cb25d50569f4207a9efd2e9bd266c17a"};var f=a("#supersized");var d="#pauseplay";var h="assets/gallery-supersized-flickr/img/";if(o){var o=a.extend(c,o)}else{var o=a.extend(c)}var b=false;var i=false;var g=o.start_slide-1;var n=o.new_window?' target="_blank"':"";if(o.performance==3){f.addClass("speed")}else{if((o.performance==1)||(o.performance==2)){f.addClass("quality")}}switch(o.source){case 1:var l="http://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key="+o.api_key+"&photoset_id="+o.set+"&per_page="+o.total_slides+"&format=json&jsoncallback=?";break;case 2:var l="http://api.flickr.com/services/rest/?format=json&method=flickr.photos.search&api_key="+o.api_key+"&user_id="+o.user+"&per_page="+o.total_slides+"&jsoncallback=?";break;case 3:var l="http://api.flickr.com/services/rest/?format=json&method=flickr.photos.search&api_key="+o.api_key+"&group_id="+o.group+"&per_page="+o.total_slides+"&jsoncallback=?";break}a.ajax({type:"GET",url:l,dataType:"json",async:true,success:function(q){var p=(o.source==1)?q.photoset.photo:q.photos.photo;a.each(p,function(u,w){var t="http://farm"+w.farm+".static.flickr.com/"+w.server+"/"+w.id+"_"+w.secret+"_"+o.image_size+".jpg";var s="http://farm"+w.farm+".static.flickr.com/"+w.server+"/"+w.id+"_"+w.secret+"_t.jpg";var v="http://www.flickr.com/photos/"+w.owner+"/"+w.id+"/";if(u==0){o.slides.splice(0,1,{image:t,thumb:s,title:w.title,url:v})}else{o.slides.push({image:t,thumb:s,title:w.title,url:v})}});g-1<0?loadPrev=o.slides.length-1:loadPrev=g-1;var r=(o.slides[loadPrev].url)?"href='"+o.slides[loadPrev].url+"'":"";a("<img/>").attr("src",o.slides[loadPrev].image).appendTo(f).wrap("<a "+r+n+"></a>");r=(o.slides[g].url)?"href='"+o.slides[g].url+"'":"";a("<img/>").attr("src",o.slides[g].image).appendTo(f).wrap('<a class="activeslide" '+r+n+"></a>");r=(o.slides[g+1].url)?"href='"+o.slides[g+1].url+"'":"";a("<img/>").attr("src",o.slides[g+1].image).appendTo(f).wrap("<a "+r+n+"></a>")}});f.hide();a("#controls-wrapper").hide();a(window).load(function(){a("#supersized-loader").hide();f.fadeIn("fast");a("#controls-wrapper").show();if(o.thumbnail_navigation==1){g-1<0?prevThumb=o.slides.length-1:prevThumb=g-1;a("#prevthumb").show().html(a("<img/>").attr("src",o.slides[prevThumb].thumb));g==o.slides.length-1?nextThumb=0:nextThumb=g+1;a("#nextthumb").show().html(a("<img/>").attr("src",o.slides[nextThumb].thumb))}m();if(o.slide_captions){a("#slidecaption").html(o.slides[g].title)}if(!(o.navigation)){a("#navigation").hide()}if(o.slideshow){if(o.slide_counter){a("#slidecounter .slidenumber").html(o.start_slide);a("#slidecounter .totalslides").html(o.slides.length)}slideshow_interval=setInterval(j,o.slide_interval);if(!(o.autoplay)){clearInterval(slideshow_interval);i=true;if(a(d).attr("src")){a(d).attr("src",h+"play_dull.png")}}if(o.thumbnail_navigation){a("#nextthumb").click(function(){if(b){return false}clearInterval(slideshow_interval);j(f,o);if(!(i)){slideshow_interval=setInterval(j,o.slide_interval)}return false});a("#prevthumb").click(function(){if(b){return false}clearInterval(slideshow_interval);e(f,o);if(!(i)){slideshow_interval=setInterval(j,o.slide_interval)}return false})}if(o.navigation){a("#navigation a").click(function(){a(this).blur();return false});a("#nextslide").click(function(){if(b){return false}clearInterval(slideshow_interval);j(f,o);if(!(i)){slideshow_interval=setInterval(j,o.slide_interval)}return false});if(a("#nextslide").attr("src")){a("#nextslide").mousedown(function(){a(this).attr("src",h+"forward.png")});a("#nextslide").mouseup(function(){a(this).attr("src",h+"forward_dull.png")});a("#nextslide").mouseout(function(){a(this).attr("src",h+"forward_dull.png")})}a("#prevslide").click(function(){if(b){return false}clearInterval(slideshow_interval);e(f,o);if(!(i)){slideshow_interval=setInterval(j,o.slide_interval)}return false});if(a("#prevslide").attr("src")){a("#prevslide").mousedown(function(){a(this).attr("src",h+"back.png")});a("#prevslide").mouseup(function(){a(this).attr("src",h+"back_dull.png")});a("#prevslide").mouseout(function(){a(this).attr("src",h+"back_dull.png")})}a(d).click(function(){if(b){return false}if(i){if(a(d).attr("src")){a(d).attr("src",h+"pause_dull.png")}i=false;slideshow_interval=setInterval(j,o.slide_interval)}else{if(a(d).attr("src")){a(d).attr("src",h+"play_dull.png")}clearInterval(slideshow_interval);i=true}return false})}}});if(o.keyboard_nav){a(document.documentElement).keydown(function(p){if((p.keyCode==37)||(p.keyCode==40)){if(a("#prevslide").attr("src")){a("#prevslide").attr("src",h+"back.png")}}else{if((p.keyCode==39)||(p.keyCode==38)){if(a("#nextslide").attr("src")){a("#nextslide").attr("src",h+"forward.png")}}}});a(document.documentElement).keyup(function(p){clearInterval(slideshow_interval);if((p.keyCode==37)||(p.keyCode==40)){if(a("#prevslide").attr("src")){a("#prevslide").attr("src",h+"back_dull.png")}if(b){return false}clearInterval(slideshow_interval);e();if(!(i)){slideshow_interval=setInterval(j,o.slide_interval)}return false}else{if((p.keyCode==39)||(p.keyCode==38)){if(a("#nextslide").attr("src")){a("#nextslide").attr("src",h+"forward_dull.png")}if(b){return false}clearInterval(slideshow_interval);j();if(!(i)){slideshow_interval=setInterval(j,o.slide_interval)}return false}else{if(p.keyCode==32){if(b){return false}if(i){if(a(d).attr("src")){a(d).attr("src",h+"pause_dull.png")}i=false;slideshow_interval=setInterval(j,o.slide_interval)}else{if(a(d).attr("src")){a(d).attr("src",h+"play_dull.png")}i=true}return false}}}})}if(o.slideshow&&o.pause_hover){a(f).hover(function(){if(b){return false}if(!(i)&&o.navigation){if(a(d).attr("src")){a(d).attr("src",h+"pause.png")}clearInterval(slideshow_interval)}},function(){if(!(i)&&o.navigation){if(a(d).attr("src")){a(d).attr("src",h+"pause_dull.png")}slideshow_interval=setInterval(j,o.slide_interval)}})}a(window).resize(function(){m()});function m(){return f.each(function(){var p=a("img",f);a(p).each(function(){var r=(a(this).height()/a(this).width()).toFixed(2);var q=a(window).width();var s=a(window).height();var t;if((s>o.min_height)||(q>o.min_width)){if((s/q)>r){if(o.fit_landscape&&r<=1){a(this).width(q);a(this).height(q*r)}else{a(this).height(s);a(this).width(s/r)}}else{if(o.fit_portrait&&r>1){a(this).height(s);a(this).width(s/r)}else{a(this).width(q);a(this).height(q*r)}}}if(o.horizontal_center){a(this).css("left",(q-a(this).width())/2)}if(o.vertical_center){a(this).css("top",(s-a(this).height())/2)}});return false})}function j(){if(b){return false}else{b=true}var r=o.slides;var q=f.find(".activeslide");q.removeClass("activeslide");if(q.length==0){q=f.find("a:last")}var p=q.next().length?q.next():f.find("a:first");var s=p.prev().length?p.prev():f.find("a:last");a(".prevslide").removeClass("prevslide");s.addClass("prevslide");g+1==r.length?g=0:g++;if(o.performance==1){f.removeClass("quality").addClass("speed")}loadSlide=false;g==r.length-1?loadSlide=0:loadSlide=g+1;imageLink=(o.slides[loadSlide].url)?"href='"+o.slides[loadSlide].url+"'":"";a("<img/>").attr("src",o.slides[loadSlide].image).appendTo(f).wrap("<a "+imageLink+n+"></a>");if(o.thumbnail_navigation==1){g-1<0?prevThumb=r.length-1:prevThumb=g-1;a("#prevthumb").html(a("<img/>").attr("src",o.slides[prevThumb].thumb));nextThumb=loadSlide;a("#nextthumb").html(a("<img/>").attr("src",o.slides[nextThumb].thumb))}q.prev().remove();if(o.slide_counter){a("#slidecounter .slidenumber").html(g+1)}if(o.slide_captions){(o.slides[g].title)?a("#slidecaption").html(o.slides[g].title):a("#slidecaption").html("")}p.hide().addClass("activeslide");switch(o.transition){case 0:p.show();b=false;break;case 1:p.fadeTo(o.transition_speed,1,function(){k()});break;case 2:p.show("slide",{direction:"up"},o.transition_speed,function(){k()});break;case 3:p.show("slide",{direction:"right"},o.transition_speed,function(){k()});break;case 4:p.show("slide",{direction:"down"},o.transition_speed,function(){k()});break;case 5:p.show("slide",{direction:"left"},o.transition_speed,function(){k()});break;case 6:p.show("slide",{direction:"right"},o.transition_speed,function(){k()});q.hide("slide",{direction:"left"},o.transition_speed);break;case 7:p.show("slide",{direction:"left"},o.transition_speed,function(){k()});q.hide("slide",{direction:"right"},o.transition_speed);break}m()}function e(){if(b){return false}else{b=true}var r=o.slides;var q=f.find(".activeslide");q.removeClass("activeslide");if(q.length==0){q=a(f).find("a:first")}var p=q.prev().length?q.prev():a(f).find("a:last");var s=p.next().length?p.next():a(f).find("a:first");a(".prevslide").removeClass("prevslide");s.addClass("prevslide");g==0?g=r.length-1:g--;if(o.performance==1){f.removeClass("quality").addClass("speed")}loadSlide=false;g-1<0?loadSlide=r.length-1:loadSlide=g-1;imageLink=(o.slides[loadSlide].url)?"href='"+o.slides[loadSlide].url+"'":"";a("<img/>").attr("src",o.slides[loadSlide].image).prependTo(f).wrap("<a "+imageLink+n+"></a>");if(o.thumbnail_navigation==1){prevThumb=loadSlide;a("#prevthumb").html(a("<img/>").attr("src",o.slides[prevThumb].thumb));g==r.length-1?nextThumb=0:nextThumb=g+1;a("#nextthumb").html(a("<img/>").attr("src",o.slides[nextThumb].thumb))}q.next().remove();if(o.slide_counter){a("#slidecounter .slidenumber").html(g+1)}if(o.slide_captions){(o.slides[g].title)?a("#slidecaption").html(o.slides[g].title):a("#slidecaption").html("")}p.hide().addClass("activeslide");switch(o.transition){case 0:p.show();b=false;break;case 1:p.fadeTo(o.transition_speed,1,function(){k()});break;case 2:p.show("slide",{direction:"down"},o.transition_speed,function(){k()});break;case 3:p.show("slide",{direction:"left"},o.transition_speed,function(){k()});break;case 4:p.show("slide",{direction:"up"},o.transition_speed,function(){k()});break;case 5:p.show("slide",{direction:"right"},o.transition_speed,function(){k()});break;case 6:p.show("slide",{direction:"left"},o.transition_speed,function(){k()});q.hide("slide",{direction:"right"},o.transition_speed,function(){k()});break;case 7:p.show("slide",{direction:"right"},o.transition_speed,function(){k()});q.hide("slide",{direction:"left"},o.transition_speed,function(){k()});break}m()}function k(){b=false;if(o.performance==1){f.removeClass("speed").addClass("quality")}}}})(jQuery);
